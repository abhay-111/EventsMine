{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\abhay\\\\OneDrive\\\\Desktop\\\\Projects\\\\Eventzmine-frontend\\\\eventzmine\\\\src\\\\components\\\\BookTicket\\\\Bookticket.js\";\nimport React, { Component } from \"react\";\nimport Navbarr from \"../Navbar/Navbar\";\nimport { Container, Row, Col, Button, Form } from \"react-bootstrap\";\nimport StripeCheckout from \"react-stripe-checkout\";\nimport { Redirect } from \"react-router-dom\";\nimport Footer from \"../Footer/Footer\";\nimport Serverservice from \"../../Services/Serverservice\";\nexport default class Bookticket extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      input: {\n        noofticket: 0,\n        state: \"\",\n        address: \"\",\n        postal_code: \"\",\n        city: \"\",\n        amount: 0\n      },\n      ticketPrice: \"\",\n      event: {},\n      redirect: null\n    };\n\n    this.bookTicket = token => {\n      console.log(this.state.ticketPrice);\n      const ticketnumber = parseInt(this.state.input.noofticket, 10);\n      console.log(localStorage.getItem(\"id\"));\n      const data = {\n        id: localStorage.getItem(\"id\"),\n        token: token,\n        state: this.state.input.state,\n        event: this.state.event,\n        amount: this.state.event.ticketPrice * ticketnumber,\n        postal_code: this.state.input.postal_code,\n        city: this.state.input.city,\n        address: this.state.input.address\n      };\n      console.log(data);\n      Serverservice.bookticket(data).then(response => {\n        console.log(response);\n        this.setState({\n          redirect: \"/user/yourtickets\"\n        });\n      }).catch(err => {\n        if (err.response.status == 502) {\n          this.setState({\n            redirect: \"/auth/login\"\n          });\n        }\n\n        console.log(err);\n      });\n    };\n\n    this.onChange = event => {\n      const input = this.state.input;\n      input[event.target.name] = event.target.value;\n      this.setState({\n        input: input\n      });\n    };\n  }\n\n  componentDidMount() {\n    const id = this.props.match.params.id;\n    console.log(id);\n    Serverservice.eventdetail(id).then(response => {\n      this.setState({\n        event: response.data.event,\n        ticketPrice: response.data.event.ticketPrice\n      });\n      console.log(typeof this.state.event.ticketPrice);\n      console.log(response);\n    }).catch(err => {\n      console.log(err.response);\n    });\n  }\n\n  render() {\n    if (this.state.redirect) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: this.state.redirect,\n          state: {\n            email: this.state.input.city\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(Navbarr, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center mt-4\",\n        children: \"Book Tickets\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Container, {\n        className: \"mt-5\",\n        children: [/*#__PURE__*/_jsxDEV(Form, {\n          children: [/*#__PURE__*/_jsxDEV(Form.Row, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridEmail\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Email\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"email\",\n                placeholder: this.state.event.email,\n                disabled: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 101,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridPassword\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"City\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 109,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                type: \"text\",\n                placeholder: \"Delhi,Mumbai etc\",\n                onChange: this.onChange,\n                name: \"city\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 110,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formGridAddress1\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              name: \"address\",\n              type: \"text\",\n              placeholder: \"1234 Main St\",\n              onChange: this.onChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n            controlId: \"formGridAddress2\",\n            children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n              children: \"Address 2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n              placeholder: \"Apartment, studio, or floor\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 131,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Form.Row, {\n            children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridState\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Number of Tickets\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 136,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"select\",\n                defaultValue: \"Choose...\",\n                onChange: this.onChange,\n                name: \"noofticket\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Choose...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 144,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 148,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 149,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 137,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridState\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"State\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"select\",\n                defaultValue: \"Choose...\",\n                onChange: this.onChange,\n                name: \"state\",\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Choose...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Delhi\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Mumbai\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Kolkata\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 163,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: \"Chennai\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 164,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 154,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n              as: Col,\n              controlId: \"formGridZip\",\n              children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                children: \"Zip\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n                onChange: this.onChange,\n                name: \"postal_code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 168,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(StripeCheckout, {\n          stripeKey: \"pk_test_51Hp8UIADAJ7Tatd8OqTodI3sQLWaBaErZlWm3K76Jy2zZadBpR8HZZOVIg8mN1ZV2i0k42N2i3TjR4iGDXpil3JV00LldPAdBy\",\n          name: \"Buy Tickets\",\n          token: this.bookTicket,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"bookbutton mt-5\",\n            style: {\n              padding: \"10px 25px\"\n            },\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              style: {\n                color: \"white\",\n                textDecoration: \"none\",\n                fontSize: \"18px\"\n              } // href={\"/booktickets/\" + this.props.match.params.id}\n              ,\n              children: [\"Pay \\u20B9\", this.state.ticketPrice * this.state.input.noofticket]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 7\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/abhay/OneDrive/Desktop/Projects/Eventzmine-frontend/eventzmine/src/components/BookTicket/Bookticket.js"],"names":["React","Component","Navbarr","Container","Row","Col","Button","Form","StripeCheckout","Redirect","Footer","Serverservice","Bookticket","state","input","noofticket","address","postal_code","city","amount","ticketPrice","event","redirect","bookTicket","token","console","log","ticketnumber","parseInt","localStorage","getItem","data","id","bookticket","then","response","setState","catch","err","status","onChange","target","name","value","componentDidMount","props","match","params","eventdetail","render","pathname","email","padding","color","textDecoration","fontSize"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Navbarr from \"../Navbar/Navbar\";\r\nimport { Container, Row, Col, Button, Form } from \"react-bootstrap\";\r\nimport StripeCheckout from \"react-stripe-checkout\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Footer from \"../Footer/Footer\";\r\nimport Serverservice from \"../../Services/Serverservice\";\r\nexport default class Bookticket extends Component {\r\n  state = {\r\n    input: {\r\n      noofticket: 0,\r\n      state: \"\",\r\n      address: \"\",\r\n      postal_code: \"\",\r\n      city: \"\",\r\n      amount: 0,\r\n    },\r\n    ticketPrice: \"\",\r\n    event: {},\r\n    redirect: null,\r\n  };\r\n\r\n  bookTicket = (token) => {\r\n    console.log(this.state.ticketPrice);\r\n    const ticketnumber = parseInt(this.state.input.noofticket, 10);\r\n    console.log(localStorage.getItem(\"id\"));\r\n    const data = {\r\n      id: localStorage.getItem(\"id\"),\r\n      token: token,\r\n      state: this.state.input.state,\r\n      event: this.state.event,\r\n      amount: this.state.event.ticketPrice * ticketnumber,\r\n      postal_code: this.state.input.postal_code,\r\n      city: this.state.input.city,\r\n      address: this.state.input.address,\r\n    };\r\n    console.log(data);\r\n    Serverservice.bookticket(data)\r\n      .then((response) => {\r\n        console.log(response);\r\n        this.setState({\r\n          redirect: \"/user/yourtickets\",\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        if (err.response.status == 502) {\r\n          this.setState({\r\n            redirect: \"/auth/login\",\r\n          });\r\n        }\r\n        console.log(err);\r\n      });\r\n  };\r\n  onChange = (event) => {\r\n    const input = this.state.input;\r\n    input[event.target.name] = event.target.value;\r\n\r\n    this.setState({\r\n      input: input,\r\n    });\r\n  };\r\n  componentDidMount() {\r\n    const id = this.props.match.params.id;\r\n    console.log(id);\r\n\r\n    Serverservice.eventdetail(id)\r\n      .then((response) => {\r\n        this.setState({\r\n          event: response.data.event,\r\n          ticketPrice: response.data.event.ticketPrice,\r\n        });\r\n        console.log(typeof this.state.event.ticketPrice);\r\n        console.log(response);\r\n      })\r\n      .catch((err) => {\r\n        console.log(err.response);\r\n      });\r\n  }\r\n  render() {\r\n    if (this.state.redirect) {\r\n      return (\r\n        <Redirect\r\n          to={{\r\n            pathname: this.state.redirect,\r\n            state: {\r\n              email: this.state.input.city,\r\n            },\r\n          }}\r\n        />\r\n      );\r\n    }\r\n    return (\r\n      <div>\r\n        <Navbarr />\r\n        <h1 className=\"text-center mt-4\">Book Tickets</h1>\r\n        <Container className=\"mt-5\">\r\n          <Form>\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId=\"formGridEmail\">\r\n                <Form.Label>Email</Form.Label>\r\n                <Form.Control\r\n                  type=\"email\"\r\n                  placeholder={this.state.event.email}\r\n                  disabled\r\n                />\r\n              </Form.Group>\r\n\r\n              <Form.Group as={Col} controlId=\"formGridPassword\">\r\n                <Form.Label>City</Form.Label>\r\n                <Form.Control\r\n                  type=\"text\"\r\n                  placeholder=\"Delhi,Mumbai etc\"\r\n                  onChange={this.onChange}\r\n                  name=\"city\"\r\n                />\r\n              </Form.Group>\r\n            </Form.Row>\r\n\r\n            <Form.Group controlId=\"formGridAddress1\">\r\n              <Form.Label>Address</Form.Label>\r\n              <Form.Control\r\n                name=\"address\"\r\n                type=\"text\"\r\n                placeholder=\"1234 Main St\"\r\n                onChange={this.onChange}\r\n              />\r\n            </Form.Group>\r\n\r\n            <Form.Group controlId=\"formGridAddress2\">\r\n              <Form.Label>Address 2</Form.Label>\r\n              <Form.Control placeholder=\"Apartment, studio, or floor\" />\r\n            </Form.Group>\r\n\r\n            <Form.Row>\r\n              <Form.Group as={Col} controlId=\"formGridState\">\r\n                <Form.Label>Number of Tickets</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  defaultValue=\"Choose...\"\r\n                  onChange={this.onChange}\r\n                  name=\"noofticket\"\r\n                >\r\n                  <option>Choose...</option>\r\n                  <option>1</option>\r\n                  <option>2</option>\r\n                  <option>3</option>\r\n                  <option>4</option>\r\n                  <option>5</option>\r\n                  <option>6</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n              <Form.Group as={Col} controlId=\"formGridState\">\r\n                <Form.Label>State</Form.Label>\r\n                <Form.Control\r\n                  as=\"select\"\r\n                  defaultValue=\"Choose...\"\r\n                  onChange={this.onChange}\r\n                  name=\"state\"\r\n                >\r\n                  <option>Choose...</option>\r\n                  <option>Delhi</option>\r\n                  <option>Mumbai</option>\r\n                  <option>Kolkata</option>\r\n                  <option>Chennai</option>\r\n                </Form.Control>\r\n              </Form.Group>\r\n\r\n              <Form.Group as={Col} controlId=\"formGridZip\">\r\n                <Form.Label>Zip</Form.Label>\r\n                <Form.Control onChange={this.onChange} name=\"postal_code\" />\r\n              </Form.Group>\r\n            </Form.Row>\r\n          </Form>\r\n          <StripeCheckout\r\n            stripeKey=\"pk_test_51Hp8UIADAJ7Tatd8OqTodI3sQLWaBaErZlWm3K76Jy2zZadBpR8HZZOVIg8mN1ZV2i0k42N2i3TjR4iGDXpil3JV00LldPAdBy\"\r\n            name=\"Buy Tickets\"\r\n            token={this.bookTicket}\r\n          >\r\n            <button\r\n              type=\"submit\"\r\n              className=\"bookbutton mt-5\"\r\n              style={{ padding: \"10px 25px\" }}\r\n            >\r\n              <a\r\n                style={{\r\n                  color: \"white\",\r\n                  textDecoration: \"none\",\r\n                  fontSize: \"18px\",\r\n                }}\r\n                // href={\"/booktickets/\" + this.props.match.params.id}\r\n              >\r\n                Pay ₹{this.state.ticketPrice * this.state.input.noofticket}\r\n              </a>\r\n            </button>\r\n          </StripeCheckout>\r\n          <Footer></Footer>\r\n        </Container>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}